# osipov_bot

Система сбора и рассылки информации и формирования команд для студентов курсов Devman имени Ильи Осипова.

Представляет собой двух телеграм-ботов и базу данных, управляемую ORM Django.

## Выполняемые функции

### Телеграм-бот для студентов

Информирует их о начале нового командного проекта,
предлагает указать удобную дату начала (первую или вторую неделю на выбор) и удобно время для созвонов с project-менеджерами.
После формирования команд присылает информацию об их составе, ссылку на доску в Trello и ТЗ по проекту

Для запуска необходимо записать в файл `.env` переменную `TG_TOKEN` - токен бота

Запуск

        python3 student_bot.py

### Телеграм-бот для менеджеров

Информирует их об их активных командах и временах созвона. Также при помощи бота можно указать время работы менеджера.

Для запуска необходимо записать в файл `.env` переменную `TG_PM_TOKEN` - токен бота

Запуск

        python3 manager_bot.py

### Админка Django

Здесь хранятся данные о пользователях, project-менеджерах и командах - как активных, так и архивных. Здесь же находится модель Start.
Создание новой записи в этой модели и установка галочки "Отправить запрос" инициирует телеграм-опрос среди активных студентов,
предлагая им выбрать записи. Установка второй галочки "Разослать сформированные команды" инициирует рассылку студентам, получившим команды,
соответствующей информации.

Для запуска рекомендуется записать в файл `.env` переменную `DJANGO_SECRET`

Запуск сервера

        manage.py runserver
        
Админка доступна по адресу `127.0.0.1:8000/admin`

## Вспомогательные скрипты

### read_students.py

Считывает из json-файла и записывает в базу данных информацию о студентах или project-менеджерах.

Использование

        python3 read_students.py [-s] [-m] [file]
        
- -s - считать в базу со студентами
- -m - считать в базу с project-менеджерами
- file - файл для чтения

### teams_making.py

Формирует команды по 3 человека из имеющихся студентов (для этого у них должны быть уже указаны желаемая дата начала проекта и удобное время для созвонов).
Формирование происходит по каждому доступнопму project-менеджеру по доступным ему временным получасовым слотам (по одной команде на слот)
Оставшихся студентов пока необходимо распределять вручную.

Запуск

        python3 teams_making.py
        
После формирования команд можно просмотреть их в админке, после чего поставить в соответствующем объекте модели Start галочку "Разослать сформированные команды"
